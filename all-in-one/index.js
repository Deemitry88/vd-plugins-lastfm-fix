(function(L,d,i,h,oe,T,m,g,s,k,l,O){"use strict";const M=h.findByProps("sendMessage"),r=async function(e,t,n,a){if(!t)return{type:4};const o={content:t,...n&&a?.factSettings?.sendAsReply?{messageReference:{messageId:n}}:{}};return await M.sendMessage(e,o,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}},W=async function(){const e=await(await fetch("https://uselessfacts.jsph.pl/api/v2/facts/random")).json();return{text:e.text,source:e.source,language:e.language}},K=async function(){return{text:(await(await fetch("https://dogapi.dog/api/v2/facts?limit=1")).json()).data[0].attributes.body}},G=async function(){const e=await(await fetch("https://catfact.ninja/fact")).json();return{text:e.fact,length:e.length}},V=async function(e){return await(await fetch(`https://api.obamabot.me/v2/image/petpet?image=${e.replace("webp","png")}`)).json()},E=function(e){let t=e.text;return i.storage.factSettings?.includeCitation&&e.source&&(t+=`

Source: ${e.source}`),t},U={name:"catfact",displayName:"catfact",description:"Sends a random cat fact.",displayDescription:"Sends a random cat fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const n=await G();return r(t.channel.id,E(n),t.message?.id,i.storage)}},q={name:"dogfact",displayName:"dogfact",description:"Sends a dog fact.",displayDescription:"Sends a dog fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const n=await K();return r(t.channel.id,E(n),t.message?.id,i.storage)}},z={name:"useless",displayName:"useless",description:"Sends a useless fact.",displayDescription:"Sends a useless fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const n=await W();return r(t.channel.id,E(n),t.message?.id,i.storage)}},y="https://vd-plugins.github.io/proxy/actuallythesun.github.io/vendetta-plugins/SplitLargeMessages/",u={ENABLED:"\u{1F7E2}",DISABLED:"\u{1F534}",SELECTED:"\u{1F536}",NOT_SELECTED:"\u{1F537}"},b=function(e){return e.map(function(t){return t.name}).join(", ")},p=function(e){return e.join(`
`).trimEnd()},I=function(e){return p(e).length},R=function(){return Object.keys(m.plugins).includes(y)},x=function(){return Object.values(m.plugins).find(function(e){return e.id===y})?.enabled??!1},$=function(){return g.alerts.showConfirmationAlert({title:"Large Message Warning",content:"This list is too long to send! Would you like to install the Split Large Messages plugin?",confirmText:"Install Plugin",cancelText:"Cancel",confirmColor:"brand",onConfirm:function(){s.openURL(y)}})},B=function(){return g.alerts.showConfirmationAlert({title:"Plugin Disabled",content:"The Split Large Messages plugin is installed but disabled. Would you like to enable it now?",confirmText:"Enable Plugin",cancelText:"Cancel",confirmColor:"brand",onConfirm:function(){const e=Object.values(m.plugins).find(function(t){return t.id===y});e&&(e.enabled=!0)}})};async function H(e,t){const n=i.storage.listSettings?.pluginListAlwaysDetailed??!1,a=[`**My Plugin List | ${Object.keys(m.plugins).length} Plugins**`,""];for(const o of Object.values(m.plugins)){const{enabled:S,manifest:C,id:N}=o,{name:w,description:D,authors:A}=C;e||n?a.push(`> **Name**: ${w}`,`> **Status**: ${S?u.ENABLED:u.DISABLED}`,`> **Description**: ${D}`,`> **Authors**: ${b(A)}`,`> **[Install!](${N})**`,""):a.push(`> ${S?u.ENABLED:u.DISABLED} **${w}** by ${b(A)}`)}return I(a)>2e3?R()?x()?g.alerts.showConfirmationAlert({title:"Large Message",content:"This list is over 2000 characters. Send anyway?",confirmText:"Send",cancelText:"Cancel",onConfirm:function(){return r(t.channel.id,p(a))}}):B():$():r(t.channel.id,p(a))}async function J(e,t){const n=i.storage.themeListAlwaysDetailed??!1,a=[`**My Theme List | ${Object.keys(T.themes).length} Themes**`,""],o=Object.values(T.themes);if(o.length)for(const S of o){const{selected:C,data:N,id:w}=S,{name:D,description:A,authors:j}=N;e||n?a.push(`> **Name**: ${D}`,`> **Selected**: ${C?u.SELECTED:u.NOT_SELECTED}`,`> **Description**: ${A}`,`> **Authors**: ${b(j)}`,`> **[Install!](${w})**`,""):a.push(`> ${C?u.SELECTED:u.NOT_SELECTED} **${D}** by ${b(j)}`)}else a.push("Nothing to see here, huh...");return I(a)>2e3?R()?x()?g.alerts.showConfirmationAlert({title:"Large Message",content:"This list is over 2000 characters. Send anyway?",confirmText:"Send",cancelText:"Cancel",onConfirm:function(){return r(t.channel.id,p(a))}}):B():$():r(t.channel.id,p(a))}const Q={name:"plugin-list",displayName:"plugin list",description:"Send your plugin list to the current channel",displayDescription:"Send your plugin list to the current channel",options:[{name:"detailed",description:"Whether to send a list with detailed information.",type:5,required:!1,displayName:"detailed",displayDescription:"Whether to send a list with detailed information."}],execute:async function(e,t){const n=e.find(function(a){return a.name==="detailed"})?.value??!1;return H(n,t)},applicationId:"-1",inputType:1,type:1},X={name:"theme-list",displayName:"theme list",description:"Send your theme list to the current channel",displayDescription:"Send your theme list to the current channel",options:[{name:"detailed",description:"Whether to send a list with detailed information.",type:5,required:!1,displayName:"detailed",displayDescription:"Whether to send a list with detailed information."}],execute:async function(e,t){const n=e.find(function(a){return a.name==="detailed"})?.value??!1;return J(n,t)},applicationId:"-1",inputType:1,type:1},Y=h.findByStoreName("UserStore"),Z={name:"petpet",displayName:"petpet",description:"PetPet someone",displayDescription:"PetPet someone",options:[{name:"user",description:"The user(or their id) to be patted",type:6,required:!0,displayName:"user",displayDescription:"The user(or their id) to be patted"}],execute:async function(e,t){const n=(await Y.getUser(e[0].value)).getAvatarURL(512),a=await V(n);return r(t.channel.id,a.url,t.message?.id)},applicationId:"-1",inputType:1,type:1},_=async function(e){const t="https://konachan.com/post.json",n=e?"rating:explicit":"rating:safe",a=Math.floor(Math.random()*100);try{const o=await(await fetch(`${t}?tags=${n}&limit=1&page=${a}`)).json();return!Array.isArray(o)||o.length===0?null:o[0].file_url}catch(o){return console.error("[KonoChan Randomizer] Error fetching image:",o),null}},F={name:"nsfw",description:"Include NSFW content?",type:5,required:!1,displayName:"nsfw",displayDescription:"Include NSFW content?"},P=function(){return g.alerts.showConfirmationAlert({title:"NSFW Content Warning",content:"NSFW content can only be sent in NSFW channels!",confirmText:"Okay",cancelText:null,confirmColor:"brand",isDismissable:!0})},ee={name:"konoself",displayName:"konoself",description:"Fetch a random image from KonoChan for yourself.",displayDescription:"Fetch a random image from KonoChan for yourself.",options:[F],execute:async function(e,t){const n=new Map(e.map(function(o){return[o.name,o]})).get("nsfw")?.value||!1;if(n&&!t.channel.nsfw)return P(),{type:4};const a=await _(n);return a?r(t.channel.id,`Here's your random image: ${a}`):r(t.channel.id,"No image found. Try again later.")},applicationId:"-1",inputType:1,type:1},te={name:"konosend",displayName:"konosend",description:"Fetch a random image from KonoChan and send it to the channel.",displayDescription:"Fetch a random image from KonoChan and send it to the channel.",options:[F],execute:async function(e,t){const n=new Map(e.map(function(o){return[o.name,o]})).get("nsfw")?.value||!1;if(n&&!t.channel.nsfw)return P(),{type:4};const a=await _(n);return a?r(t.channel.id,a):r(t.channel.id,"No image found. Try again later.")},applicationId:"-1",inputType:1,type:1},{ScrollView:ne}=h.findByProps("ScrollView"),{TableRowGroup:f,TableSwitchRow:c,Stack:ae}=h.findByProps("TableSwitchRow","TableRowGroup","Stack");i.storage.factSettings||(i.storage.factSettings={sendAsReply:!0,includeCitation:!1}),i.storage.listSettings||(i.storage.listSettings={pluginListAlwaysDetailed:!1,themeListAlwaysDetailed:!1});function ie(){k.useProxy(i.storage);const[e,t]=s.React.useReducer(function(n){return n+1},0);return s.React.createElement(O.View,{style:{flex:1}},s.React.createElement(ne,{style:{flex:1}},s.React.createElement(ae,{spacing:8},s.React.createElement(f,{title:"Facts Commands"},s.React.createElement(c,{label:"Send as Reply",subLabel:"Send facts as a reply to the command message",icon:l.getAssetIDByName("ic_reply_24px"),value:i.storage.factSettings.sendAsReply,onValueChange:function(n){i.storage.factSettings.sendAsReply=n,t()}}),s.React.createElement(c,{label:"Include Source Citation",subLabel:"Include the source of facts when available",icon:l.getAssetIDByName("ic_info"),value:i.storage.factSettings.includeCitation,onValueChange:function(n){i.storage.factSettings.includeCitation=n,t()}}),s.React.createElement(c,{label:"/catfact",subLabel:"Get random cat facts",icon:l.getAssetIDByName("ic_info"),value:!0,disabled:!0}),s.React.createElement(c,{label:"/dogfact",subLabel:"Get random dog facts",icon:l.getAssetIDByName("ic_info"),value:!0,disabled:!0}),s.React.createElement(c,{label:"/useless",subLabel:"Get random useless facts",icon:l.getAssetIDByName("ic_info"),value:!0,disabled:!0})),s.React.createElement(f,{title:"List Commands"},s.React.createElement(c,{label:"Always Send Detailed Plugin List",subLabel:"Always use detailed mode when listing plugins",icon:l.getAssetIDByName("ic_message_copy"),value:i.storage.listSettings.pluginListAlwaysDetailed,onValueChange:function(n){i.storage.listSettings.pluginListAlwaysDetailed=n,t()}}),s.React.createElement(c,{label:"Always Send Detailed Theme List",subLabel:"Always use detailed mode when listing themes",icon:l.getAssetIDByName("ic_theme"),value:i.storage.listSettings.themeListAlwaysDetailed,onValueChange:function(n){i.storage.listSettings.themeListAlwaysDetailed=n,t()}}),s.React.createElement(c,{label:"/plugin-list",subLabel:"List all installed plugins",icon:l.getAssetIDByName("ic_plugins"),value:!0,disabled:!0}),s.React.createElement(c,{label:"/theme-list",subLabel:"List all installed themes",icon:l.getAssetIDByName("ic_theme"),value:!0,disabled:!0})),s.React.createElement(f,{title:"Image Commands"},s.React.createElement(c,{label:"/petpet",subLabel:"Create pet-pet GIF of a user",icon:l.getAssetIDByName("ic_image"),value:!0,disabled:!0})),s.React.createElement(f,{title:"KonoChan Commands"},s.React.createElement(c,{label:"/konoself",subLabel:"Get random image from KonoChan (private)",icon:l.getAssetIDByName("ic_image"),value:!0,disabled:!0}),s.React.createElement(c,{label:"/konosend",subLabel:"Send random image from KonoChan to channel",icon:l.getAssetIDByName("ic_image"),value:!0,disabled:!0})),s.React.createElement(f,{title:"About"},s.React.createElement(c,{label:"All-In-One Commands",subLabel:"A collection of useful commands",icon:l.getAssetIDByName("ic_badge_staff"),value:!0,disabled:!0})))))}i.storage.factSettings||(i.storage.factSettings={sendAsReply:!0,includeCitation:!1}),i.storage.listSettings||(i.storage.listSettings={pluginListAlwaysDetailed:!1,themeListAlwaysDetailed:!1});let v=[];var se={onLoad:function(){console.log("[All-In-One Commands] Loading plugin..."),v=[d.registerCommand(U),d.registerCommand(q),d.registerCommand(z),d.registerCommand(Z),d.registerCommand(Q),d.registerCommand(X),d.registerCommand(ee),d.registerCommand(te)],console.log("[All-In-One Commands] Plugin loaded successfully!")},onUnload:function(){console.log("[All-In-One Commands] Unloading plugin..."),v.forEach(function(e){return e()}),v=[],console.log("[All-In-One Commands] Plugin unloaded successfully!")},settings:ie};return L.default=se,Object.defineProperty(L,"__esModule",{value:!0}),L})({},vendetta.commands,vendetta.plugin,vendetta.metro,vendetta.ui.toasts,vendetta.themes,vendetta.plugins,vendetta.ui,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.metro.common.ReactNative);
