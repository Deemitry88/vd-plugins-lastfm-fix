(function(C,l,T,a,$,d,B,U,V,r,P){"use strict";const{FormSwitchRow:u,FormIcon:p,FormSection:N,FormDivider:W}=P.Forms,g={List:r.getAssetIDByName("ic_list"),Message:r.getAssetIDByName("ic_message"),Copy:r.getAssetIDByName("ic_copy_message_link"),Info:r.getAssetIDByName("ic_info"),Theme:r.getAssetIDByName("ic_theme"),Plugin:r.getAssetIDByName("ic_plugins")};function k(){return V.useProxy(a.storage),a.storage.factSettings||(a.storage.factSettings={sendAsReply:!0,includeCitation:!1}),a.storage.listSettings||(a.storage.listSettings={pluginListAlwaysDetailed:!1,themeListAlwaysDetailed:!1}),React.createElement(P.ErrorBoundary,null,React.createElement(U.ReactNative.ScrollView,{style:{flex:1}},React.createElement(N,{title:"Fact Commands",titleStyleType:"no_border"},React.createElement(u,{label:"Send as Reply",subLabel:"Send facts as a reply to the command message",leading:React.createElement(p,{source:g.Message}),onValueChange:function(e){a.storage.factSettings.sendAsReply=e},value:a.storage.factSettings.sendAsReply}),React.createElement(W,null),React.createElement(u,{label:"Include Source Citation",subLabel:"Include the source of facts when available",leading:React.createElement(p,{source:g.Info}),onValueChange:function(e){a.storage.factSettings.includeCitation=e},value:a.storage.factSettings.includeCitation})),React.createElement(N,{title:"Plugin List",titleStyleType:"no_border"},React.createElement(u,{label:"Always Send Detailed List",subLabel:"Always use detailed mode when listing plugins",leading:React.createElement(p,{source:g.Plugin}),onValueChange:function(e){a.storage.listSettings.pluginListAlwaysDetailed=e},value:a.storage.listSettings.pluginListAlwaysDetailed})),React.createElement(N,{title:"Theme List",titleStyleType:"no_border"},React.createElement(u,{label:"Always Send Detailed List",subLabel:"Always use detailed mode when listing themes",leading:React.createElement(p,{source:g.Theme}),onValueChange:function(e){a.storage.listSettings.themeListAlwaysDetailed=e},value:a.storage.listSettings.themeListAlwaysDetailed}))))}const M=T.findByStoreName("UserStore"),x=T.findByProps("sendMessage"),m=T.findByProps("sendBotMessage"),_=M.getCurrentUser()?.premiumType===2?4e3:2e3;let i=[];const o={ENABLED:"\u{1F7E2}",DISABLED:"\u{1F534}",SELECTED:"\u{1F536}",NOT_SELECTED:"\u{1F537}"},h="https://vd-plugins.github.io/proxy/actuallythesun.github.io/vendetta-plugins/SplitLargeMessages/",q=async function(){const e=await(await fetch("https://uselessfacts.jsph.pl/api/v2/facts/random")).json();return{text:e.text,source:e.source,language:e.language}},z=async function(){return{text:(await(await fetch("https://dogapi.dog/api/v2/facts?limit=1")).json()).data[0].attributes.body}},G=async function(){const e=await(await fetch("https://catfact.ninja/fact")).json();return{text:e.fact,length:e.length}};async function H(e){return await(await fetch(`https://api.obamabot.me/v2/image/petpet?image=${e.replace("webp","png")}`)).json()}const I=function(e){let t=e.text;return a.storage.factSettings?.includeCitation&&e.source&&(t+=`

Source: ${e.source}`),t},y=function(e,t,s){const n={content:t,...s&&a.storage.factSettings?.sendAsReply?{messageReference:{messageId:s}}:{}};return x.sendMessage(e,n,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}},f=function(e){return e.map(function(t){return t.name}).join(", ")},j=function(e){return e.join(`
`).trimEnd()},S=function(e){return j(e).length},D=async function(e,t){x.sendMessage(e,{content:j(t)},void 0,{nonce:(Date.now()*4194304).toString()})},O=function(){return Object.keys(d.plugins).includes(h)},F=function(){return Object.values(d.plugins).find(function(e){return e.id===h})?.enabled??!1};async function J(e,t){const s=a.storage.themeListAlwaysDetailed??!1,n=[`**My Theme List | ${Object.keys($.themes).length} Themes**`,""],c=Object.values($.themes);if(c.length)for(const E of c){const{selected:b,data:R,id:v}=E,{name:L,description:A,authors:Y}=R;e||s?n.push(`> **Name**: ${L}`,`> **Selected**: ${b?o.SELECTED:o.NOT_SELECTED}`,`> **Description**: ${A}`,`> **Authors**: ${f(Y)}`,`> **[Install!](${v})**`,""):n.push(`> ${b?o.SELECTED:o.NOT_SELECTED} **${L}** by ${f(Y)}`)}else n.push("Nothing to see here, huh...");const w=S(n)>_;return w&&!O()?(m.sendBotMessage(t.channel.id,`Your list is too long to send it! Please install the [Split Large Messages](${h}) plugin.`,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}):w&&!F()?(m.sendBotMessage(t.channel.id,`Your list is too long to send it! You have the Split Large Messages plugin installed, but it's not enabled!
> Please enable it in order to send the list.`,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}):S(n)>2e3?B.alerts.showConfirmationAlert({content:"Your list is over than 2000 characters. Are you sure?",confirmText:"Yes",cancelText:"No",onConfirm:async function(){return await D(t.channel.id,n)}}):(await D(t.channel.id,n),{type:4})}async function K(e,t){const s=a.storage.pluginListAlwaysDetailed??!1,n=[`**My Plugin List | ${Object.keys(d.plugins).length} Plugins**`,""];for(const w of Object.values(d.plugins)){const{enabled:E,manifest:b,id:R}=w,{name:v,description:L,authors:A}=b;e||s?n.push(`> **Name**: ${v}`,`> **Status**: ${E?o.ENABLED:o.DISABLED}`,`> **Description**: ${L}`,`> **Authors**: ${f(A)}`,`> **[Install!](${R})**`,""):n.push(`> ${E?o.ENABLED:o.DISABLED} **${v}** by ${f(A)}`)}const c=S(n)>_;return c&&!O()?(m.sendBotMessage(t.channel.id,`Your list is too long to send it! Please install the [Split Large Messages](${h}) plugin.`,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}):c&&!F()?(m.sendBotMessage(t.channel.id,`Your list is too long to send it! You have the Split Large Messages plugin installed, but it's not enabled!
> Please enable it in order to send the list.`,void 0,{nonce:(Date.now()*4194304).toString()}),{type:4}):S(n)>2e3?B.alerts.showConfirmationAlert({content:"Your list is over than 2000 characters. Are you sure?",confirmText:"Yes",cancelText:"No",onConfirm:async function(){return await D(t.channel.id,n)}}):(await D(t.channel.id,n),{type:4})}const Q=function(){i.push(l.registerCommand({name:"catfact",displayName:"catfact",description:"Sends a random cat fact.",displayDescription:"Sends a random cat fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const s=await G();return y(t.channel.id,I(s),t.message?.id)}})),i.push(l.registerCommand({name:"dogfact",displayName:"dogfact",description:"Sends a dog fact.",displayDescription:"Sends a dog fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const s=await z();return y(t.channel.id,I(s),t.message?.id)}})),i.push(l.registerCommand({name:"useless",displayName:"useless",description:"Sends a useless fact.",displayDescription:"Sends a useless fact.",applicationId:"-1",inputType:1,type:1,execute:async function(e,t){const s=await q();return y(t.channel.id,I(s),t.message?.id)}})),i.push(l.registerCommand({name:"petpet",displayName:"petpet",description:"PetPet someone",displayDescription:"PetPet someone",options:[{name:"user",description:"The user(or their id) to be patted",type:6,required:!0,displayName:"user",displayDescription:"The user(or their id) to be patted"}],execute:async function(e,t){const s=(await M.getUser(e[0].value)).getAvatarURL(512),n=await H(s);return y(t.channel.id,n.url,t.message?.id)},applicationId:"-1",inputType:1,type:1})),i.push(l.registerCommand({name:"plugin-list",displayName:"plugin list",description:"Send your plugin list to the current channel",displayDescription:"Send your plugin list to the current channel",options:[{name:"detailed",description:"Whether to send a list with detailed information.",type:5,required:!1,displayName:"detailed",displayDescription:"Whether to send a list with detailed information."}],execute:async function(e,t){const s=e.find(function(n){return n.name==="detailed"})?.value??!1;return K(s,t)},applicationId:"-1",inputType:1,type:1})),i.push(l.registerCommand({name:"theme-list",displayName:"theme list",description:"Send your theme list to the current channel",displayDescription:"Send your theme list to the current channel",options:[{name:"detailed",description:"Whether to send a list with detailed information.",type:5,required:!1,displayName:"detailed",displayDescription:"Whether to send a list with detailed information."}],execute:async function(e,t){const s=e.find(function(n){return n.name==="detailed"})?.value??!1;return J(s,t)},applicationId:"-1",inputType:1,type:1}))};a.storage.factSettings||(a.storage.factSettings={sendAsReply:!0,includeCitation:!1}),a.storage.listSettings||(a.storage.listSettings={pluginListAlwaysDetailed:!1,themeListAlwaysDetailed:!1});var X={onLoad:function(){console.log("[All-In-One Commands] Plugin loaded!"),Q()},onUnload:function(){console.log("[All-In-One Commands] Plugin unloaded!"),i.forEach(function(e){return e()}),i=[]},settings:k};return C.default=X,Object.defineProperty(C,"__esModule",{value:!0}),C})({},vendetta.commands,vendetta.metro,vendetta.plugin,vendetta.themes,vendetta.plugins,vendetta.ui,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components);
