(function(i,s,o,u,h){"use strict";const t={avatarRadius:12,bubbleChatRadius:12,bubbleChatColor:"#36393f"},p=function(){return{...t,...s.storage}};let l=[];const C=function(){try{const e=o.findByProps("MessageContent")||o.findByProps("Message","MessageHeader")||o.findByProps("default","MessageContent"),r=o.findByProps("Avatar")||o.findByProps("default","Avatar")||o.findByProps("getUserAvatarURL");return{MessageComponent:e,AvatarComponent:r}}catch(e){return console.log("Error finding components:",e),{MessageComponent:null,AvatarComponent:null}}},d=function(){const e=p(),{avatarRadius:r,bubbleChatRadius:v,bubbleChatColor:y}=e,{MessageComponent:c,AvatarComponent:f}=C();if(c)try{c.default&&l.push(h.after("default",c,function(n,a){return a&&typeof a=="object"&&a.props&&(a.props.style={...a.props.style,backgroundColor:y,borderRadius:v,padding:8,marginVertical:2,marginHorizontal:4}),a}))}catch(n){console.log("Error patching message component:",n)}if(f)try{f.default&&l.push(h.after("default",f,function(n,a){return a&&a.props&&(a.props.style={...a.props.style,borderRadius:r}),a}))}catch(n){console.log("Error patching avatar component:",n)}},b=function(){l.forEach(function(e){try{e()}catch(r){console.log("Error removing patch:",r)}}),l=[]};var g={onLoad:function(){try{d(),u.showToast("ChatBubbles loaded!")}catch(e){console.error("ChatBubbles load error:",e),u.showToast("ChatBubbles failed to load")}},onUnload:function(){try{b(),u.showToast("ChatBubbles unloaded")}catch(e){console.error("ChatBubbles unload error:",e)}},settings:{avatarRadius:{type:"slider",title:"Avatar Curve",note:"Adjust the border radius of avatars (0-18)",default:t.avatarRadius,min:0,max:18,step:3,onValueChange:function(e){s.storage.avatarRadius=e,b(),d()}},bubbleChatRadius:{type:"slider",title:"Bubble Curve",note:"Adjust the border radius of chat bubbles (0-18)",default:t.bubbleChatRadius,min:0,max:18,step:3,onValueChange:function(e){s.storage.bubbleChatRadius=e,b(),d()}},bubbleChatColor:{type:"text",title:"Bubble Color",note:"Hex color for chat bubbles (e.g., #36393f)",default:t.bubbleChatColor,placeholder:"#36393f",onValueChange:function(e){e===""||/^#[0-9A-Fa-f]{6,8}$/.test(e)?(s.storage.bubbleChatColor=e||t.bubbleChatColor,b(),d()):u.showToast("Invalid color! Use hex format like #36393f")}}}};return i.default=g,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.plugin,vendetta.metro,vendetta.ui.toasts,vendetta.patcher);
